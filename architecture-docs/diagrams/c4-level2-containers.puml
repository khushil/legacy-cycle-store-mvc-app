@startuml
' Syntax verified: 2025-10-30
' C4 Level 2: Container Diagram

title C4 Level 2 Container Diagram - Adventure Works Cycle Store

skinparam rectangle {
    BackgroundColor<<person>> #08427B
    BackgroundColor<<container>> #438DD5
    BackgroundColor<<external>> #999999
    FontColor white
}

skinparam database {
    BackgroundColor #999999
    FontColor white
}

actor "Web User" as user <<person>>

package "Adventure Works Cycle Store System" {
    rectangle "Web Application" as webapp <<container>> {
        note as N1
            ASP.NET MVC 4
            .NET Framework 4.5

            Provides product catalog,
            category navigation,
            and user authentication
            via Razor views and
            MVC controllers
        end note
    }
}

database "CYCLE_STORE\nDatabase" as maindb <<external>> {
    note as N2
        SQL Server on AWS RDS

        Stores:
        - Product catalog
        - Product categories
        - Product subcategories
        - Product descriptions
    end note
}

database "ASPNetDB\nDatabase" as memberdb <<external>> {
    note as N3
        SQL Server
        Location Unknown

        Stores:
        - User accounts
        - Membership data
        - Roles and profiles

        **MISCONFIGURED**
    end note
}

user --> webapp : Browses products,\nsearches catalog,\nauthenticates\n[HTTPS]

webapp --> maindb : Reads product data,\nqueries categories,\nfilters products\n[Entity Framework 5]

webapp .> memberdb : Validates credentials,\nmanages sessions\n[SQL Membership Provider]\n**MISSING CONNECTION**

note right of webapp
  **Technology Stack**:
  - ASP.NET MVC 4
  - .NET Framework 4.5
  - Razor View Engine
  - Entity Framework 5 (EDMX)
  - Forms Authentication
  - IIS Express (Port 55185)

  **Configuration**:
  - Session Timeout: 30 days
  - Custom Error Pages: 404, 500
  - Debug Mode: Enabled
end note

note right of maindb
  **Connection**: CYCLE_STOREEntities
  **Schema**: Production
  **Access Pattern**: Database-First EDMX
  **Status**: Placeholder credentials
end note

note right of memberdb
  **Connection String**: ASPNetDB
  **Status**: MISCONFIGURATION
  Referenced in Web.config but
  connection string not defined
  **Provider**: SqlMembershipProvider
  **Application**: C1AdventureWorks
end note

@enduml
